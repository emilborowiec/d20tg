@using d20TG.Features.Scenarios.State
@using d20TG.Features.Scenarios.Model
@using d20TG.Features.Scenarios.Utils
@inject IMyNavigationManager MyNavigation

<div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
    <div class="grid gap-6 mb-6 md:grid-cols-1">
        <p class="border" style="border-color: @AttackerBuild.ColorHex">@AttackerBuild.Label</p>
        <h6 class="text-lg">Attack Bonus</h6>
        <p>@AttackerBuild.AttackBonus</p>
        <h6 class="text-lg">Damage Bonus</h6>
        <p>@AttackerBuild.DamageBonus</p>
        <h6 class="text-lg">Damage Dice</h6>
        <p>@AttackerBuild.DamageDiceState.ToString()</p>
        @if (OnDeleteClickCallback.HasDelegate)
        {
            <button @onclick="@(async () => await OnDeleteClickCallback.InvokeAsync(AttackerBuild.Id))"
                    class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 flex flex-row justify-center">
                <i>
                    <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h16M7 8v8m4-8v8M7 1h4a1 1 0 0 1 1 1v3H6V2a1 1 0 0 1 1-1ZM3 5h12v13a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5Z"/>
                    </svg>
                </i>
            </button>
        }
    </div>
    <button @onclick="HandleEditClick"
            class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 flex flex-row justify-center">
        Edit
    </button>
</div>

@code {

    [Parameter, EditorRequired]
    public string ScenarioId { get; set; } = null!;

    [Parameter, EditorRequired]
    public AttackerBuildState AttackerBuild { get; set; }

    [Parameter]
    public EventCallback<string> OnDeleteClickCallback { get; set; }

    private void HandleEditClick()
    {
        MyNavigation.NavigateToAttacker(ScenarioId, AttackerBuild.Id);
    }

}